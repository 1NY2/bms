import{_,o as a,c,b as e,t as l,e as i}from"./index-0403a620.js";const p={name:"PurchaseSuccess",data(){return{result:null}},created(){this.loadResult()},methods:{loadResult(){const o=this.$route.query.result;if(o)try{const s=JSON.parse(decodeURIComponent(o));s&&typeof s=="object"&&s.code===500&&s.data?this.result={success:!1,...s.data}:s&&typeof s=="object"&&s.success===!1?this.result=s:s&&typeof s=="object"&&s.hasOwnProperty("orderNo")?this.result=s:s&&typeof s=="object"&&s.success===!0?this.result=s:(console.error("解析后的结果不是一个有效的对象或缺少必要属性",s),this.result=null)}catch(s){console.error("解析购买结果失败",s),this.result=null}else this.result=null},getErrorMessage(){var o,s;if(!this.result||!this.result.success){const n=((o=this.result)==null?void 0:o.message)||"购买失败，请稍后重试";switch(((s=this.result)==null?void 0:s.errorType)||"UNKNOWN_ERROR"){case"ID_CHECK_FAILED":return"身份验证失败，请检查您的身份证信息是否正确";case"USER_VERIFY_FAILED":return"用户信息校验失败，请确认您的账户状态是否正常";case"AMOUNT_VALIDATE_FAILED":return"金额校验失败："+n;case"BALANCE_INSUFFICIENT":return"账户余额不足，请充值后重试";case"LIMIT_EXCEEDED":return"购买限额超限："+n;case"INVENTORY_INSUFFICIENT":return"产品库存不足，无法购买";case"REGION_RESTRICTED":return"您的地域不符合购买条件，无法购买此产品";case"TAG_RESTRICTED":return"您不符合购买此产品的用户标签要求";case"WHITELIST_DENIED":return"您不在白名单中，无法购买此产品";case"PURCHASE_ERROR":return"购买流程执行失败，请稍后重试";case"NETWORK_ERROR":return"网络连接失败，请检查网络后重试";default:return n}}return"购买失败，请稍后重试"},goBack(){this.$router.go(-1)},retry(){this.loadResult(),this.result||this.$router.push("/products")},formatCurrency(o){return o==null?"0.00":parseFloat(o).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},formatDate(o){if(!o)return"";const s=new Date(o),n=s.getFullYear(),d=String(s.getMonth()+1).padStart(2,"0"),t=String(s.getDate()).padStart(2,"0");return`${n}-${d}-${t}`},goToProductList(){this.$router.push("/products")},viewOrderDetail(){this.result&&this.result.orderNo&&this.$router.push(`/order/${this.result.orderNo}`)}}},f={class:"success-page"},h={key:0,class:"error-card"},v={class:"error-message"},E={class:"error-actions"},m={key:1,class:"success-icon"},y={key:2,class:"success-title"},g={key:3,class:"success-amount"},N={key:4,class:"order-card"},b={class:"order-header"},R={class:"order-no"},I={class:"order-detail"},D={class:"detail-row"},T={class:"value"},C={class:"detail-row"},k={class:"value"},S={class:"detail-row"},w={class:"value"},O={class:"detail-row"},L={class:"value highlight"},F={class:"detail-row"},P={class:"value income"},A={class:"detail-row"},B={class:"value"},U={class:"detail-row"},x={class:"value"},M={class:"detail-row"},V={class:"value"},j={key:5,class:"actions"};function H(o,s,n,d,t,r){return a(),c("div",f,[!t.result||t.result&&t.result.success===!1?(a(),c("div",h,[s[4]||(s[4]=e("div",{class:"error-icon"},"⚠️",-1)),s[5]||(s[5]=e("div",{class:"error-title"},"交易失败",-1)),e("div",v,l(r.getErrorMessage()),1),e("div",E,[e("button",{class:"retry-btn",onClick:s[0]||(s[0]=(...u)=>r.goToProductList&&r.goToProductList(...u))},"返回产品列表"),e("button",{class:"back-btn",onClick:s[1]||(s[1]=(...u)=>r.goBack&&r.goBack(...u))},"返回上一页")])])):t.result&&t.result.orderNo?(a(),c("div",m,[...s[6]||(s[6]=[e("div",{class:"circle"},[e("div",{class:"checkmark"},"✓")],-1)])])):i("",!0),t.result&&t.result.orderNo?(a(),c("div",y,"交易成功")):i("",!0),t.result&&t.result.amount?(a(),c("div",g,"¥"+l(r.formatCurrency(t.result.amount)),1)):i("",!0),t.result&&t.result.orderNo?(a(),c("div",N,[e("div",b,[s[7]||(s[7]=e("span",{class:"label"},"订单号",-1)),e("span",R,l(t.result.orderNo),1)]),e("div",I,[e("div",D,[s[8]||(s[8]=e("span",{class:"label"},"存入金额",-1)),e("span",T,"¥"+l(r.formatCurrency(t.result.amount)),1)]),e("div",C,[s[9]||(s[9]=e("span",{class:"label"},"产品名称",-1)),e("span",k,l(t.result.productName),1)]),e("div",S,[s[10]||(s[10]=e("span",{class:"label"},"存款期限",-1)),e("span",w,l(t.result.duration),1)]),e("div",O,[s[11]||(s[11]=e("span",{class:"label"},"年化利率",-1)),e("span",L,l(t.result.annualRate)+"%",1)]),e("div",F,[s[12]||(s[12]=e("span",{class:"label"},"预期收益",-1)),e("span",P,"¥"+l(r.formatCurrency(t.result.expectedIncome)),1)]),e("div",A,[s[13]||(s[13]=e("span",{class:"label"},"起息日期",-1)),e("span",B,l(r.formatDate(t.result.startDate)),1)]),e("div",U,[s[14]||(s[14]=e("span",{class:"label"},"到期日期",-1)),e("span",x,l(r.formatDate(t.result.endDate)),1)]),e("div",M,[s[15]||(s[15]=e("span",{class:"label"},"购买时间",-1)),e("span",V,l(r.formatDate(t.result.purchaseTime)),1)])])])):i("",!0),t.result&&t.result.orderNo?(a(),c("div",j,[e("button",{class:"primary-btn",onClick:s[2]||(s[2]=(...u)=>r.viewOrderDetail&&r.viewOrderDetail(...u))},"查看订单详情"),e("button",{class:"secondary-btn",onClick:s[3]||(s[3]=(...u)=>r.goToProductList&&r.goToProductList(...u))},"继续购买")])):i("",!0)])}const W=_(p,[["render",H],["__scopeId","data-v-8feb27f2"]]);export{W as default};
