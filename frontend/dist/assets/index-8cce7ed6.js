import{a as n}from"./index-0403a620.js";const t=n.create({baseURL:"http://localhost:8080/api",timeout:5e3});t.interceptors.request.use(e=>{const r=localStorage.getItem("token");return r&&(e.headers.Authorization="Bearer "+r),e},e=>(console.log(e),Promise.reject(e)));t.interceptors.response.use(e=>{console.log("API响应拦截器 - 原始响应:",e);const r=e.config.url&&e.config.url.includes("/admin/"),s=e.config.url&&e.config.url==="/purchase/orders",o=e.config.url&&/^\/purchase\/order\/[^\/]+$/.test(e.config.url)&&!e.config.url.includes("/status")&&!e.config.url.includes("/remark")&&!e.config.url.includes("cancel"),u=e.config.url&&e.config.url.includes("/purchase/execute")&&!s&&!o;return r||s||o||u?e:e.data},e=>(console.log("API响应错误:",e),e.response&&e.response.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("userInfo"),window.location.href="/#/login"),Promise.reject(e)));const i={getProductList(){return t.get("/admin/products/list")},getProductDetail(e){return t.get(`/admin/products/detail/${e}`)},saveProduct(e){return t.post("/admin/products/save",e)},updateProductStatus(e,r){return t.post(`/admin/products/status/${e}?status=${r}`)},updateInventory(e,r){return t.post(`/admin/products/inventory/${e}?inventory=${r}`)},deleteProduct(e){return t.delete(`/admin/products/delete/${e}`)}},l={purchaseProduct(e){return t.post("/purchase/execute",e)},getUserOrders(e){return t.get(`/purchase/orders/${e}`)},getAllOrders(){return t.get("/purchase/orders")},getOrderDetail(e){return t.get(`/purchase/order/${e}`)},updateOrderRemark(e,r){return t.put(`/purchase/order/${e}/remark`,{remark:r})},updateOrderStatus(e,r){return t.put(`/purchase/order/${e}/status`,{status:r})},cancelOrder(e,r){return t.post(`/purchase/order/${e}/cancel`,{userId:r})}},c={getUserInfo(e){return t.get(`/user/info/${e}`)},getUserAssets(e){return t.get(`/user/assets/${e}`)},updateUserInfo(e,r){return t.put(`/user/info/${e}`,r)}},d={getAllUsers(){return t.get("/admin/users/list")},updateUserStatus(e,r){return t.post("/admin/users/update-status",null,{params:{username:e,status:r}})},resetUserPassword(e,r){return t.post("/admin/users/reset-password",null,{params:{username:e,newPassword:r}})}},g={listWorkflows(){return t.get("/admin/workflow/list")},saveWorkflow(e){return t.post("/admin/workflow/save",e)},publishWorkflow(e){return t.post(`/admin/workflow/publish/${e}`)},unpublishWorkflow(e){return t.post(`/admin/workflow/unpublish/${e}`)},deleteWorkflow(e){return t.delete(`/admin/workflow/delete/${e}`)},testWorkflow(e,r){return t.post(`/admin/workflow/test/${e}`,r)}},p={listServices(){return t.get("/admin/atomic/list")},getServiceDetail(e){return t.get(`/admin/atomic/detail/${e}`)},testService(e,r){return t.post(`/admin/atomic/test/${e}`,r)}},m={getAllLogs(){return t.get("/admin/logs/all")},getLogsByUser(e){return t.get(`/admin/logs/by-user/${e}`)},getLogsByType(e){return t.get(`/admin/logs/by-type/${e}`)},getLogsByAction(e){return t.get(`/admin/logs/by-action/${e}`)},getLogsByProduct(e){return t.get(`/admin/logs/by-product/${e}`)},getLogsByOrder(e){return t.get(`/admin/logs/by-order/${e}`)},getLogsByStatus(e){return t.get(`/admin/logs/by-status/${e}`)},getLogsByTimeRange(e,r){return t.get(`/admin/logs/by-time-range?startTime=${e}&endTime=${r}`)},searchLogs(e){return t.get(`/admin/logs/search?keyword=${e}`)}};export{l as a,p as b,d as c,m as l,i as p,c as u,g as w};
