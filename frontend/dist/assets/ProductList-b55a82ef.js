import{p as m}from"./index-8cce7ed6.js";import{_ as h,o as i,c as n,b as s,d as p,v as f,F as c,r as u,e as y,g as _,n as g,t as a}from"./index-0403a620.js";const C={name:"ProductList",data(){return{loading:!1,products:[],searchKeyword:"",activeCategory:"all",sortBy:"rate",categories:[{key:"all",name:"å…¨éƒ¨"},{key:"fixed",name:"å®šæœŸå­˜æ¬¾"},{key:"notice",name:"é€šçŸ¥å­˜æ¬¾"}]}},computed:{recommendedProducts(){return[...this.products].sort((o,e)=>parseFloat(e.annualRate)-parseFloat(o.annualRate)).slice(0,3)},filteredProducts(){let o=this.products;return this.searchKeyword&&(o=o.filter(e=>e.productName.toLowerCase().includes(this.searchKeyword.toLowerCase()))),this.activeCategory!=="all"&&(this.activeCategory==="fixed"?o=o.filter(e=>e.productName.includes("å®šæœŸ")||e.productName.includes("æ•´å­˜")):this.activeCategory==="notice"&&(o=o.filter(e=>e.productName.includes("é€šçŸ¥")||e.productName.includes("æ´»æœŸ")))),this.sortProductList(o)}},created(){this.loadProducts()},mounted(){this.$refs.userCenterBtn&&this.$refs.userCenterBtn.addEventListener("click",this.goToUserCenter)},beforeUnmount(){this.$refs.userCenterBtn&&this.$refs.userCenterBtn.removeEventListener("click",this.goToUserCenter)},methods:{async loadProducts(){this.loading=!0;try{const o=await m.getProductList();this.products=o.data&&o.data.data||[]}catch(o){console.error("åŠ è½½äº§å“åˆ—è¡¨å¤±è´¥",o)}finally{this.loading=!1}},handleSearch(){},switchCategory(o){this.activeCategory=o},sortProducts(){},sortProductList(o){return[...o].sort((e,l)=>this.sortBy==="rate"?parseFloat(l.annualRate)-parseFloat(e.annualRate):this.sortBy==="term"?e.duration-l.duration:0)},goToDetail(o){this.$router.push(`/product/${o}`)},goToUserCenter(){this.$router.push("/user-center")}}},k={class:"product-list-page"},P={class:"header"},B={class:"user-center-btn",ref:"userCenterBtn"},b={class:"search-container"},w={class:"search-box"},L={class:"category-tabs"},x=["onClick"],N={key:0,class:"recommended-section"},T={class:"recommended-products"},D=["onClick"],F={class:"product-header"},R={class:"product-name"},U={class:"product-rate"},K={class:"rate-value"},S={class:"product-list-section"},V={class:"section-header"},A={class:"sort-options"},E={key:0,class:"loading"},I={key:1,class:"empty"},M=["onClick"],z={class:"product-header"},j={class:"product-name"},q={class:"product-period"},G={class:"product-rate"},H={class:"rate-value"},J={class:"product-info"},O={class:"info-item"},Q={class:"info-value"},W={class:"info-item"},X={class:"info-value"};function Y(o,e,l,Z,d,r){return i(),n("div",k,[s("div",P,[s("div",{class:"back-btn",onClick:e[0]||(e[0]=t=>o.$router.back())},[...e[5]||(e[5]=[s("span",null,"<",-1)])]),e[7]||(e[7]=s("h1",{class:"title"},"å­˜æ¬¾äº§å“",-1)),s("div",B,[...e[6]||(e[6]=[s("span",null,"ðŸ‘¤",-1)])],512)]),s("div",b,[s("div",w,[e[8]||(e[8]=s("span",{class:"search-icon"},"ðŸ”",-1)),p(s("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>d.searchKeyword=t),placeholder:"æœç´¢äº§å“åç§°",class:"search-input",onInput:e[2]||(e[2]=(...t)=>r.handleSearch&&r.handleSearch(...t))},null,544),[[f,d.searchKeyword]])])]),s("div",L,[(i(!0),n(c,null,u(d.categories,t=>(i(),n("div",{key:t.key,class:g(["tab",{active:d.activeCategory===t.key}]),onClick:v=>r.switchCategory(t.key)},a(t.name),11,x))),128))]),r.recommendedProducts.length>0?(i(),n("div",N,[e[12]||(e[12]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"ðŸ”¥ çƒ­é—¨æŽ¨è")],-1)),s("div",T,[(i(!0),n(c,null,u(r.recommendedProducts,t=>(i(),n("div",{key:t.id,class:"recommended-product-card",onClick:v=>r.goToDetail(t.productCode)},[s("div",F,[s("div",R,a(t.productName),1),e[9]||(e[9]=s("div",{class:"product-tag hot-tag"},"çƒ­é—¨",-1))]),s("div",U,[s("span",K,a(t.annualRate),1),e[10]||(e[10]=s("span",{class:"rate-unit"},"%",-1))]),e[11]||(e[11]=s("div",{class:"rate-label"},"å¹´åŒ–åˆ©çŽ‡",-1))],8,D))),128))])])):y("",!0),s("div",S,[s("div",V,[e[14]||(e[14]=s("h2",{class:"section-title"},"æ‰€æœ‰äº§å“",-1)),s("div",A,[p(s("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>d.sortBy=t),onChange:e[4]||(e[4]=(...t)=>r.sortProducts&&r.sortProducts(...t)),class:"sort-select"},[...e[13]||(e[13]=[s("option",{value:"rate"},"æŒ‰åˆ©çŽ‡æŽ’åº",-1),s("option",{value:"term"},"æŒ‰æœŸé™æŽ’åº",-1)])],544),[[_,d.sortBy]])])]),d.loading?(i(),n("div",E,"åŠ è½½ä¸­...")):r.filteredProducts.length===0?(i(),n("div",I,[...e[15]||(e[15]=[s("div",{class:"empty-icon"},"ðŸ“­",-1),s("div",{class:"empty-text"},"æš‚æ— ç¬¦åˆæ¡ä»¶çš„äº§å“",-1)])])):(i(!0),n(c,{key:2},u(r.filteredProducts,t=>(i(),n("div",{key:t.id,class:"product-card",onClick:v=>r.goToDetail(t.productCode)},[s("div",z,[s("div",j,a(t.productName),1),s("div",q,a(t.durationDesc),1)]),s("div",G,[s("span",H,a(t.annualRate),1),e[16]||(e[16]=s("span",{class:"rate-unit"},"%",-1))]),e[19]||(e[19]=s("div",{class:"rate-label"},"å¹´åŒ–åˆ©çŽ‡",-1)),s("div",J,[s("div",O,[e[17]||(e[17]=s("span",{class:"info-label"},"èµ·å­˜é‡‘é¢",-1)),s("span",Q,a(t.minAmount)+"å…ƒ",1)]),s("div",W,[e[18]||(e[18]=s("span",{class:"info-label"},"é€’å¢žé‡‘é¢",-1)),s("span",X,a(t.incrementAmount)+"å…ƒ",1)])]),e[20]||(e[20]=s("div",{class:"arrow"},">",-1))],8,M))),128))])])}const se=h(C,[["render",Y],["__scopeId","data-v-35cef350"]]);export{se as default};
