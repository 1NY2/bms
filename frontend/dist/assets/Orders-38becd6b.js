import{a as v}from"./index-8cce7ed6.js";import{_,o,c as l,b as e,n,F as p,r as m,t as d}from"./index-0403a620.js";const f={name:"Orders",data(){return{orders:[],loading:!1,activeFilter:"ALL",userInfo:{}}},computed:{filteredOrders(){return this.activeFilter==="ALL"?this.orders:this.orders.filter(s=>s.status===this.activeFilter)}},created(){const s=localStorage.getItem("userInfo");s&&(this.userInfo=JSON.parse(s),this.loadOrders())},methods:{async loadOrders(){if(this.userInfo.userId){this.loading=!0;try{const s=await v.getUserOrders(this.userInfo.userId);this.orders=s&&s.data||[]}catch(s){console.error("åŠ è½½è®¢å•åˆ—è¡¨å¤±è´¥",s),alert("åŠ è½½è®¢å•åˆ—è¡¨å¤±è´¥: "+s.message)}finally{this.loading=!1}}},setFilter(s){this.activeFilter=s},getOrderStatusText(s){return{SUCCESS:"å·²å®Œæˆ",PROCESSING:"å¤„ç†ä¸­",PENDING:"å¾…æ”¯ä»˜",FAILED:"å·²å¤±è´¥",CANCELLED:"å·²å–æ¶ˆ"}[s]||s},formatCurrency(s){return parseFloat(s).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},formatDateTime(s){if(!s)return"";const t=new Date(s),c=t.getFullYear(),u=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${c}-${u}-${i} ${a}:${r}`},viewOrderDetail(s){this.$router.push(`/order/${s.orderNo}`)}}},S={class:"orders-page"},g={class:"header"},h={class:"filter-section"},C={class:"filter-tabs"},y={class:"orders-list"},F={key:0,class:"loading"},O={key:1,class:"empty-orders"},I={key:2},k=["onClick"],b={class:"order-header"},L={class:"order-product"},E={class:"order-details"},N={class:"detail-row"},D={class:"value order-no"},w={class:"detail-row"},x={class:"value"},A={class:"detail-row"},T={class:"value income"},G={class:"detail-row"},M={class:"value"};function P(s,t,c,u,i,a){return o(),l("div",S,[e("div",g,[e("div",{class:"back-btn",onClick:t[0]||(t[0]=r=>s.$router.back())},[...t[4]||(t[4]=[e("span",null,"<",-1)])]),t[5]||(t[5]=e("h1",{class:"title"},"æˆ‘çš„è®¢å•",-1)),t[6]||(t[6]=e("div",{class:"header-placeholder"},null,-1))]),e("div",h,[e("div",C,[e("div",{class:n(["tab-item",{active:i.activeFilter==="ALL"}]),onClick:t[1]||(t[1]=r=>a.setFilter("ALL"))}," å…¨éƒ¨ ",2),e("div",{class:n(["tab-item",{active:i.activeFilter==="SUCCESS"}]),onClick:t[2]||(t[2]=r=>a.setFilter("SUCCESS"))}," å·²å®Œæˆ ",2),e("div",{class:n(["tab-item",{active:i.activeFilter==="PROCESSING"}]),onClick:t[3]||(t[3]=r=>a.setFilter("PROCESSING"))}," å¤„ç†ä¸­ ",2)])]),e("div",y,[i.loading?(o(),l("div",F,"åŠ è½½ä¸­...")):a.filteredOrders.length===0?(o(),l("div",O,[...t[7]||(t[7]=[e("div",{class:"empty-icon"},"ğŸ“­",-1),e("div",{class:"empty-text"},"æš‚æ— è®¢å•è®°å½•",-1)])])):(o(),l("div",I,[(o(!0),l(p,null,m(a.filteredOrders,r=>(o(),l("div",{key:r.id,class:"order-card",onClick:U=>a.viewOrderDetail(r)},[e("div",b,[e("div",L,d(r.productName),1),e("div",{class:n(["order-status",r.status])},d(a.getOrderStatusText(r.status)),3)]),e("div",E,[e("div",N,[t[8]||(t[8]=e("span",{class:"label"},"è®¢å•å·",-1)),e("span",D,d(r.orderNo),1)]),e("div",w,[t[9]||(t[9]=e("span",{class:"label"},"è´­ä¹°é‡‘é¢",-1)),e("span",x,"Â¥"+d(a.formatCurrency(r.amount)),1)]),e("div",A,[t[10]||(t[10]=e("span",{class:"label"},"é¢„æœŸæ”¶ç›Š",-1)),e("span",T,"Â¥"+d(a.formatCurrency(r.expectedIncome)),1)]),e("div",G,[t[11]||(t[11]=e("span",{class:"label"},"ä¸‹å•æ—¶é—´",-1)),e("span",M,d(a.formatDateTime(r.createTime)),1)])])],8,k))),128))]))])])}const R=_(f,[["render",P],["__scopeId","data-v-e5a43c6a"]]);export{R as default};
