import{u as h,a as b}from"./index-8cce7ed6.js";import{A as p}from"./AssetPieChart-c10643e7.js";import{_ as I,k as y,o as v,c as f,b as s,t as o,l as g,h as m}from"./index-0403a620.js";const C={name:"AssetsOverview",components:{AssetPieChart:p},data(){return{userInfo:{},totalAssets:0,totalIncome:0,monthlyIncome:0,annualizedReturn:2.8,investmentCount:0,assetsBreakdown:{fixed:0,current:0,other:0},dataLoaded:!1,loading:!1}},created(){const a=localStorage.getItem("userInfo");a&&(this.userInfo=JSON.parse(a),this.loadData())},methods:{async loadData(){if(this.userInfo.userId){this.loading=!0;try{const a=await h.getUserInfo(this.userInfo.userId),t=a&&a.data||null;t&&(this.totalAssets=t.balance||0,this.assetsBreakdown={fixed:t.balance*.68||0,current:t.balance*.24||0,other:t.balance*.08||0});const l=await b.getUserOrders(this.userInfo.userId),c=l&&l.data||[];if(c){let e=0,i=0,d=0;const r=new Date,_=new Date(r.getFullYear(),r.getMonth(),1);c.forEach(n=>{if(n.status==="SUCCESS"&&n.expectedIncome){const u=parseFloat(n.expectedIncome);e+=u,d++,new Date(n.createTime)>=_&&(i+=u)}}),this.totalIncome=e,this.monthlyIncome=i,this.investmentCount=d}this.dataLoaded=!0}catch(a){console.error("åŠ è½½èµ„äº§æ•°æ®å¤±è´¥",a),alert("åŠ è½½èµ„äº§æ•°æ®å¤±è´¥: "+a.message)}finally{this.loading=!1}}},formatCurrency(a){return parseFloat(a).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}}},k={class:"assets-page"},w={class:"header"},x={class:"total-assets"},A={class:"assets-amount"},D={class:"assets-change positive"},B={class:"chart-section"},S={class:"chart-container"},O={key:1,class:"loading-placeholder"},F={class:"assets-details"},R={class:"detail-list"},E={class:"detail-item"},L={class:"item-amount"},N={class:"detail-item"},P={class:"item-amount"},U={class:"detail-item"},z={class:"item-amount"},M={class:"income-stats"},V={class:"stats-grid"},J={class:"stat-card"},T={class:"stat-value income"},Y={class:"stat-card"},j={class:"stat-value"},q={class:"stat-card"},G={class:"stat-value"},H={class:"stat-card"},K={class:"stat-value"};function Q(a,t,l,c,e,i){const d=y("AssetPieChart");return v(),f("div",k,[s("div",w,[s("div",{class:"back-btn",onClick:t[0]||(t[0]=r=>a.$router.back())},[...t[1]||(t[1]=[s("span",null,"<",-1)])]),t[2]||(t[2]=s("h1",{class:"title"},"èµ„äº§æ¦‚è§ˆ",-1)),t[3]||(t[3]=s("div",{class:"header-placeholder"},null,-1))]),s("div",x,[t[4]||(t[4]=s("div",{class:"assets-label"},"æ€»èµ„äº§",-1)),s("div",A,"Â¥"+o(i.formatCurrency(e.totalAssets)),1),s("div",D,"+"+o(i.formatCurrency(e.totalIncome))+" ä»Šæ—¥æ”¶ç›Š",1)]),s("div",B,[t[5]||(t[5]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"èµ„äº§åˆ†å¸ƒ")],-1)),s("div",S,[e.dataLoaded?(v(),g(d,{key:0,data:e.assetsBreakdown},null,8,["data"])):(v(),f("div",O,"åŠ è½½ä¸­..."))])]),s("div",F,[t[9]||(t[9]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"èµ„äº§æ˜ç»†")],-1)),s("div",R,[s("div",E,[t[6]||(t[6]=m('<div class="item-info" data-v-2379bce2><div class="item-icon bg-purple" data-v-2379bce2>ğŸ“…</div><div class="item-text" data-v-2379bce2><div class="item-name" data-v-2379bce2>å®šæœŸå­˜æ¬¾</div><div class="item-desc" data-v-2379bce2>ç¨³å¥æ”¶ç›Š</div></div></div>',1)),s("div",L,"Â¥"+o(i.formatCurrency(e.assetsBreakdown.fixed||0)),1)]),s("div",N,[t[7]||(t[7]=m('<div class="item-info" data-v-2379bce2><div class="item-icon bg-blue" data-v-2379bce2>âš¡</div><div class="item-text" data-v-2379bce2><div class="item-name" data-v-2379bce2>æ´»æœŸå­˜æ¬¾</div><div class="item-desc" data-v-2379bce2>çµæ´»å­˜å–</div></div></div>',1)),s("div",P,"Â¥"+o(i.formatCurrency(e.assetsBreakdown.current||0)),1)]),s("div",U,[t[8]||(t[8]=m('<div class="item-info" data-v-2379bce2><div class="item-icon bg-pink" data-v-2379bce2>ğŸ“ˆ</div><div class="item-text" data-v-2379bce2><div class="item-name" data-v-2379bce2>å…¶ä»–ç†è´¢</div><div class="item-desc" data-v-2379bce2>é«˜æ”¶ç›Šäº§å“</div></div></div>',1)),s("div",z,"Â¥"+o(i.formatCurrency(e.assetsBreakdown.other||0)),1)])])]),s("div",M,[t[14]||(t[14]=s("div",{class:"section-header"},[s("h2",{class:"section-title"},"æ”¶ç›Šç»Ÿè®¡")],-1)),s("div",V,[s("div",J,[t[10]||(t[10]=s("div",{class:"stat-label"},"ç´¯è®¡æ”¶ç›Š",-1)),s("div",T,"Â¥"+o(i.formatCurrency(e.totalIncome)),1)]),s("div",Y,[t[11]||(t[11]=s("div",{class:"stat-label"},"æœ¬æœˆæ”¶ç›Š",-1)),s("div",j,"Â¥"+o(i.formatCurrency(e.monthlyIncome)),1)]),s("div",q,[t[12]||(t[12]=s("div",{class:"stat-label"},"å¹´åŒ–æ”¶ç›Šç‡",-1)),s("div",G,o(e.annualizedReturn)+"%",1)]),s("div",H,[t[13]||(t[13]=s("div",{class:"stat-label"},"æŠ•èµ„äº§å“æ•°",-1)),s("div",K,o(e.investmentCount),1)])])])])}const ss=I(C,[["render",Q],["__scopeId","data-v-2379bce2"]]);export{ss as default};
