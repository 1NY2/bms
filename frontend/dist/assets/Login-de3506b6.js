import{_ as h,a as c,o as d,c as p,b as e,t as a,w as _,d as u,v as m,e as g,f}from"./index-0403a620.js";const v="http://localhost:8080/api",L={name:"Login",data(){return{isLogin:!0,form:{username:"",password:"",phone:"",email:""}}},methods:{toggleMode(){this.isLogin=!this.isLogin,this.form={username:"",password:"",phone:"",email:""}},async handleSubmit(){if(!this.form.username||!this.form.password){alert("请填写用户名和密码");return}if(!this.isLogin&&!this.form.phone){alert("请填写手机号");return}try{const n=this.isLogin?"/auth/login":"/auth/register";let s={};this.isLogin?s={username:this.form.username,password:this.form.password}:s={username:this.form.username,password:this.form.password,phone:this.form.phone,email:this.form.email};const i=await c.post(`${v}${n}`,s);if(i.data.success){const r=i.data.data;localStorage.setItem("token",r.token),localStorage.setItem("userInfo",JSON.stringify({username:r.username,realName:r.realName,role:r.role,userId:r.userId})),alert(i.data.message),r.role==="ADMIN"?this.$router.push("/admin"):this.$router.push("/products")}else alert(i.data.message)}catch(n){console.error("请求失败:",n),alert("操作失败，请稍后重试")}}}},b={class:"login-container"},w={class:"login-card"},y={class:"login-header"},x={class:"subtitle"},S={class:"form-group"},I={class:"form-group"},k={key:0},N={class:"form-group"},V={class:"form-group"},M={class:"form-actions"},q={type:"submit",class:"submit-btn"},B={class:"toggle-mode"},D={key:0,class:"test-accounts"};function U(n,s,i,r,o,l){return d(),p("div",b,[e("div",w,[e("div",y,[s[6]||(s[6]=e("h1",null,"银行存款产品服务编排系统",-1)),e("p",x,a(o.isLogin?"用户登录":"用户注册"),1)]),e("form",{onSubmit:s[4]||(s[4]=_((...t)=>l.handleSubmit&&l.handleSubmit(...t),["prevent"])),class:"login-form"},[e("div",S,[s[7]||(s[7]=e("label",null,"用户名",-1)),u(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>o.form.username=t),type:"text",placeholder:"请输入用户名",class:"form-input",required:""},null,512),[[m,o.form.username]])]),e("div",I,[s[8]||(s[8]=e("label",null,"密码",-1)),u(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.form.password=t),type:"password",placeholder:"请输入密码",class:"form-input",required:""},null,512),[[m,o.form.password]])]),o.isLogin?g("",!0):(d(),p("div",k,[e("div",N,[s[9]||(s[9]=e("label",null,"手机号",-1)),u(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.form.phone=t),type:"text",placeholder:"请输入手机号",class:"form-input",required:""},null,512),[[m,o.form.phone]])]),e("div",V,[s[10]||(s[10]=e("label",null,"邮箱",-1)),u(e("input",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.form.email=t),type:"email",placeholder:"请输入邮箱",class:"form-input"},null,512),[[m,o.form.email]])])])),e("div",M,[e("button",q,a(o.isLogin?"登录":"注册"),1)])],32),e("div",B,[e("p",null,[f(a(o.isLogin?"还没有账号？":"已有账号？")+" ",1),e("a",{href:"#",onClick:s[5]||(s[5]=(...t)=>l.toggleMode&&l.toggleMode(...t))},a(o.isLogin?"立即注册":"立即登录"),1)])]),o.isLogin?(d(),p("div",D,[...s[11]||(s[11]=[e("h3",null,"测试账号",-1),e("div",{class:"account-item"},[e("strong",null,"管理员："),f("admin / admin123 ")],-1),e("div",{class:"account-item"},[e("strong",null,"普通用户："),f("testuser / user123 ")],-1)])])):g("",!0)])])}const C=h(L,[["render",U],["__scopeId","data-v-91a71a71"]]);export{C as default};
