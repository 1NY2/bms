import{_ as U,m as d,p as k,o as m,c as p,b as t,F as A,r as L,t as u,d as n,v as a,g as M,w as P,e as E,n as _}from"./index-0403a620.js";import{p as b}from"./index-8cce7ed6.js";const x={class:"product-manage"},I={class:"product-table"},S=["onClick"],N=["onClick"],T={class:"dialog-content"},R={class:"form-row"},B={class:"form-group"},F=["disabled"],H={class:"form-group"},O={class:"form-row"},W={class:"form-group"},$={class:"form-group"},z={class:"form-row"},G={class:"form-group"},X={class:"form-group"},j={class:"form-row"},q={class:"form-group"},J={class:"form-group"},K={class:"form-row"},Q={class:"form-group"},Y={class:"form-group"},Z={class:"form-row"},h={class:"form-group"},tt={class:"form-group"},lt={class:"form-row"},et={class:"form-group"},ot={class:"form-group"},st={class:"form-group"},nt={__name:"ProductManage",setup(at){const g=d([]),r=d(!1),i=d("create"),o=d({}),c=s=>({ACTIVE:"在售",PAUSED:"暂停",EXPIRED:"已过期"})[s]||s,v=async()=>{try{const s=await b.getProductList();s.data&&s.data.success&&(g.value=s.data.data)}catch(s){console.error("获取产品列表失败:",s),alert("获取产品列表失败")}},y=()=>{i.value="create",o.value={productCode:"",productName:"",annualRate:0,duration:0,durationDesc:"",minAmount:0,incrementAmount:0,personLimit:0,dailyLimit:0,riskLevel:"LOW",interestMethod:"到期一次性结息",startDate:"",endDate:"",inventory:1e3,description:""},r.value=!0},C=s=>{i.value="edit",o.value={...s},r.value=!0},V=async()=>{try{const s=await b.saveProduct(o.value);s.data&&s.data.success?(alert("保存成功"),f(),await v()):alert("保存失败: "+(s.data?s.data.message:"未知错误"))}catch(s){console.error("保存产品失败:",s),alert("保存失败")}},D=async s=>{const l=s.status==="ACTIVE"?"PAUSED":"ACTIVE";try{const e=await b.updateProductStatus(s.productCode,l);e.data&&e.data.success?(alert("状态更新成功"),await v()):alert("状态更新失败: "+(e.data?e.data.message:"未知错误"))}catch(e){console.error("更新状态失败:",e),alert("更新状态失败")}},f=()=>{r.value=!1,o.value={}};return k(()=>{v()}),(s,l)=>(m(),p("div",x,[l[33]||(l[33]=t("div",{class:"page-header"},[t("h2",null,"产品属性配置"),t("p",{class:"page-desc"},"管理银行存款产品的基础属性")],-1)),t("div",{class:"product-actions"},[t("button",{onClick:y,class:"btn-create"},"+ 新建产品")]),t("div",I,[t("table",null,[l[16]||(l[16]=t("thead",null,[t("tr",null,[t("th",null,"产品编号"),t("th",null,"产品名称"),t("th",null,"年化利率"),t("th",null,"期限"),t("th",null,"起存金额"),t("th",null,"库存"),t("th",null,"状态"),t("th",null,"操作")])],-1)),t("tbody",null,[(m(!0),p(A,null,L(g.value,e=>(m(),p("tr",{key:e.id},[t("td",null,u(e.productCode),1),t("td",null,u(e.productName),1),t("td",null,u(e.annualRate)+"%",1),t("td",null,u(e.durationDesc),1),t("td",null,"¥"+u(e.minAmount),1),t("td",null,u(e.inventory),1),t("td",null,[t("span",{class:_(["status-badge",e.status])},u(c(e.status)),3)]),t("td",null,[t("button",{onClick:w=>C(e),class:"btn-edit"},"编辑",8,S),t("button",{onClick:w=>D(e),class:"btn-toggle"},u(e.status==="ACTIVE"?"下架":"上架"),9,N)])]))),128))])])]),r.value?(m(),p("div",{key:0,class:"dialog-overlay",onClick:f},[t("div",{class:"dialog",onClick:l[15]||(l[15]=P(()=>{},["stop"]))},[t("h3",null,u(i.value==="create"?"新建产品":"编辑产品"),1),t("div",T,[t("div",R,[t("div",B,[l[17]||(l[17]=t("label",null,"产品编号 *",-1)),n(t("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.productCode=e),disabled:i.value==="edit",class:"form-input"},null,8,F),[[a,o.value.productCode]])]),t("div",H,[l[18]||(l[18]=t("label",null,"产品名称 *",-1)),n(t("input",{"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.productName=e),class:"form-input"},null,512),[[a,o.value.productName]])])]),t("div",O,[t("div",W,[l[19]||(l[19]=t("label",null,"年化利率(%) *",-1)),n(t("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.annualRate=e),type:"number",step:"0.01",class:"form-input"},null,512),[[a,o.value.annualRate,void 0,{number:!0}]])]),t("div",$,[l[20]||(l[20]=t("label",null,"期限(天) *",-1)),n(t("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>o.value.duration=e),type:"number",class:"form-input"},null,512),[[a,o.value.duration,void 0,{number:!0}]])])]),t("div",z,[t("div",G,[l[21]||(l[21]=t("label",null,"期限说明",-1)),n(t("input",{"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.durationDesc=e),placeholder:"如: 180天, 3个月",class:"form-input"},null,512),[[a,o.value.durationDesc]])]),t("div",X,[l[22]||(l[22]=t("label",null,"起存金额(元) *",-1)),n(t("input",{"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.minAmount=e),type:"number",class:"form-input"},null,512),[[a,o.value.minAmount,void 0,{number:!0}]])])]),t("div",j,[t("div",q,[l[23]||(l[23]=t("label",null,"递增金额(元) *",-1)),n(t("input",{"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.incrementAmount=e),type:"number",class:"form-input"},null,512),[[a,o.value.incrementAmount,void 0,{number:!0}]])]),t("div",J,[l[24]||(l[24]=t("label",null,"库存数量 *",-1)),n(t("input",{"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.inventory=e),type:"number",class:"form-input"},null,512),[[a,o.value.inventory,void 0,{number:!0}]])])]),t("div",K,[t("div",Q,[l[25]||(l[25]=t("label",null,"单人限额(元) *",-1)),n(t("input",{"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.personLimit=e),type:"number",class:"form-input"},null,512),[[a,o.value.personLimit,void 0,{number:!0}]])]),t("div",Y,[l[26]||(l[26]=t("label",null,"单日限额(元) *",-1)),n(t("input",{"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.dailyLimit=e),type:"number",class:"form-input"},null,512),[[a,o.value.dailyLimit,void 0,{number:!0}]])])]),t("div",Z,[t("div",h,[l[28]||(l[28]=t("label",null,"风险等级",-1)),n(t("select",{"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.riskLevel=e),class:"form-input"},[...l[27]||(l[27]=[t("option",{value:"LOW"},"低风险",-1),t("option",{value:"MEDIUM"},"中风险",-1),t("option",{value:"HIGH"},"高风险",-1)])],512),[[M,o.value.riskLevel]])]),t("div",tt,[l[29]||(l[29]=t("label",null,"结息方式",-1)),n(t("input",{"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.interestMethod=e),class:"form-input"},null,512),[[a,o.value.interestMethod]])])]),t("div",lt,[t("div",et,[l[30]||(l[30]=t("label",null,"起息日期 *",-1)),n(t("input",{"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.startDate=e),type:"date",class:"form-input"},null,512),[[a,o.value.startDate]])]),t("div",ot,[l[31]||(l[31]=t("label",null,"到期日期 *",-1)),n(t("input",{"onUpdate:modelValue":l[13]||(l[13]=e=>o.value.endDate=e),type:"date",class:"form-input"},null,512),[[a,o.value.endDate]])])]),t("div",st,[l[32]||(l[32]=t("label",null,"产品描述",-1)),n(t("textarea",{"onUpdate:modelValue":l[14]||(l[14]=e=>o.value.description=e),rows:"3",class:"form-textarea"},null,512),[[a,o.value.description]])])]),t("div",{class:"dialog-actions"},[t("button",{onClick:V,class:"btn-primary"},"保存"),t("button",{onClick:f,class:"btn-secondary"},"取消")])])])):E("",!0)]))}},it=U(nt,[["__scopeId","data-v-23da369b"]]);export{it as default};
